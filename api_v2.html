<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>API version 2 &mdash; Freshmaker  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Configuration" href="configuration.html" />
    <link rel="prev" title="API version 1" href="api_v1.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> Freshmaker
          </a>
              <div class="version">
                0.1.2
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="about.html">About Freshmaker</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_v1.html">API version 1</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">API version 2</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#event-json-representation">Event JSON representation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#artifact-build-json-representation">Artifact Build JSON representation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rest-api-pagination">REST API pagination</a></li>
<li class="toctree-l2"><a class="reference internal" href="#http-rest-api">HTTP REST API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="messaging_api.html">Messaging API</a></li>
<li class="toctree-l1"><a class="reference internal" href="db.html">Freshmaker database</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Freshmaker</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a></li>
      <li class="breadcrumb-item active">API version 2</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/api_v2.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="api-version-2">
<h1>API version 2<a class="headerlink" href="#api-version-2" title="Permalink to this heading"></a></h1>
<p>The Freshmaker API version 2 is mostly same as the API version 1. This document therefore describes only the differences between these two API versions.</p>
<section id="event-json-representation">
<span id="event-json-api-2"></span><h2>Event JSON representation<a class="headerlink" href="#event-json-representation" title="Permalink to this heading"></a></h2>
<p>The Freshmaker Event is always represented in the API request as JSON, for example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>{
    &quot;builds_summary&quot;: {
        &quot;total&quot;: 0
    },
    &quot;depending_events&quot;: [],
    &quot;depends_on_events&quot;: [],
    &quot;dry_run&quot;: false,
    &quot;event_type_id&quot;: 10,
    &quot;id&quot;: 18730,
    &quot;message_id&quot;: &quot;message_123&quot;,
    &quot;requested_rebuilds&quot;: [],
    &quot;requester&quot;: null,
    &quot;requester_metadata&quot;: {},
    &quot;search_key&quot;: &quot;44637&quot;,
    &quot;state&quot;: 3,
    &quot;state_name&quot;: &quot;COMPLETE&quot;,
    &quot;state_reason&quot;: &quot;4 images rebuilt.&quot;,
    &quot;time_created&quot;: &quot;2019-08-01T07:00:46Z&quot;,
    &quot;time_done&quot;: &quot;2019-08-01T07:03:12Z&quot;,
    &quot;url&quot;: &quot;/api/1/events/18730&quot;
}
</pre></div>
</div>
<p>The meaning of almost all the fields is the same as in <a class="reference internal" href="api_v1.html#event-json-api-1"><span class="std std-ref">Event JSON representation</span></a> using the API version 1.</p>
<p>There are following differences between API version 1 and API version 2:</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">builds</span></code> field is replaced with <code class="docutils literal notranslate"><span class="pre">builds_summary</span></code>.</p></li>
</ul>
<dl id="event-builds-summary">
<dt><em>builds_summary</em> - <code class="docutils literal notranslate"><span class="pre">(JSON)</span></code></dt><dd><p>JSON object showing the summary of artifacts builds included in the Event grouped by their <code class="docutils literal notranslate"><span class="pre">state_name</span></code>. For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&quot;builds_summary&quot;: {
    &quot;total&quot;: 10,
    &quot;DONE&quot;: 7,
    &quot;FAILED&quot;: 3
}
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="artifact-build-json-representation">
<span id="build-json-api-2"></span><h2>Artifact Build JSON representation<a class="headerlink" href="#artifact-build-json-representation" title="Permalink to this heading"></a></h2>
<p>The JSON representation of Artifact Build is exactly the same as in <a class="reference internal" href="api_v1.html#build-json-api-1"><span class="std std-ref">Artifact Build JSON representation</span></a> using the API version 1.</p>
</section>
<section id="rest-api-pagination">
<span id="pagination-api-2"></span><h2>REST API pagination<a class="headerlink" href="#rest-api-pagination" title="Permalink to this heading"></a></h2>
<p>The pagination works exactly the same way as in <a class="reference internal" href="api_v1.html#pagination-api-1"><span class="std std-ref">REST API pagination</span></a> using the API version 1.</p>
</section>
<section id="http-rest-api">
<h2>HTTP REST API<a class="headerlink" href="#http-rest-api" title="Permalink to this heading"></a></h2>
<dl class="http get">
<dt class="sig sig-object http" id="get--api-2-events-">
<span class="sig-name descname"><span class="pre">GET</span> </span><span class="sig-name descname"><span class="pre">/api/2/events/</span></span><a class="headerlink" href="#get--api-2-events-" title="Permalink to this definition"></a></dt>
<dd><p>Returns Freshmaker Events.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">id</span></code> is set, only the Freshmaker Event defined by that ID is
returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Query Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>message_id</strong> (<em>string</em>) – Return only events with this <a class="reference internal" href="api_v1.html#event-message-id"><span class="std std-ref">message_id</span></a>.</p></li>
<li><p><strong>search_key</strong> (<em>string</em>) – Return only events with this <a class="reference internal" href="api_v1.html#event-search-key"><span class="std std-ref">search_key</span></a>.</p></li>
<li><p><strong>event_type_id</strong> (<em>number</em>) – Return only events with this <a class="reference internal" href="api_v1.html#event-event-type-id"><span class="std std-ref">event_type_id</span></a>.</p></li>
<li><p><strong>state</strong> (<em>number/string</em>) – Return only events int this <a class="reference internal" href="api_v1.html#event-state"><span class="std std-ref">state</span></a>.</p></li>
<li><p><strong>show_full_json</strong> (<em>bool</em>) – <p>When <code class="docutils literal notranslate"><span class="pre">True</span></code>, the returned Freshmaker Event JSON objects
contains all the fields described in the
<a class="reference internal" href="api_v1.html#event-json-api-1"><span class="std std-ref">Freshmaker Event representation for API version 1</span></a>.</p>
<p>When <code class="docutils literal notranslate"><span class="pre">False</span></code>, the returned Freshmaker Event JSON objects are in the
<a class="reference internal" href="#event-json-api-2"><span class="std std-ref">Freshmaker Event representation for API version 2</span></a> format.</p>
<p>Default value for API version 1 is <code class="docutils literal notranslate"><span class="pre">True</span></code>, for API version 2 is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</p></li>
<li><p><strong>order_by</strong> (<em>string</em>) – <p>Order the events by the given field. If <code class="docutils literal notranslate"><span class="pre">-</span></code> prefix is used,
the order will be descending. The default value is <code class="docutils literal notranslate"><span class="pre">-id</span></code>. Available fields are:</p>
<ul>
<li><p><a class="reference internal" href="api_v1.html#event-id"><span class="std std-ref">id</span></a></p></li>
<li><p><a class="reference internal" href="api_v1.html#event-message-id"><span class="std std-ref">message_id</span></a></p></li>
</ul>
</p></li>
</ul>
</dd>
<dt class="field-even">Status Codes</dt>
<dd class="field-even"><ul class="simple">
<li><p><span><a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.1">200 OK</a></span> – Requested events are returned.</p></li>
<li><p><span><a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.5">404 Not Found</a></span> – Freshmaker event not found.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="http get">
<dt class="sig sig-object http" id="get--api-2-events-(int-id)">
<span class="sig-name descname"><span class="pre">GET</span> </span><span class="sig-name descname"><span class="pre">/api/2/events/</span></span><span class="sig-paren">(</span><em class="property"><span class="pre">int:</span> </em><em class="sig-param"><span class="pre">id</span></em><span class="sig-paren">)</span><a class="headerlink" href="#get--api-2-events-(int-id)" title="Permalink to this definition"></a></dt>
<dd><p>Returns Freshmaker Events.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">id</span></code> is set, only the Freshmaker Event defined by that ID is
returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Query Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>message_id</strong> (<em>string</em>) – Return only events with this <a class="reference internal" href="api_v1.html#event-message-id"><span class="std std-ref">message_id</span></a>.</p></li>
<li><p><strong>search_key</strong> (<em>string</em>) – Return only events with this <a class="reference internal" href="api_v1.html#event-search-key"><span class="std std-ref">search_key</span></a>.</p></li>
<li><p><strong>event_type_id</strong> (<em>number</em>) – Return only events with this <a class="reference internal" href="api_v1.html#event-event-type-id"><span class="std std-ref">event_type_id</span></a>.</p></li>
<li><p><strong>state</strong> (<em>number/string</em>) – Return only events int this <a class="reference internal" href="api_v1.html#event-state"><span class="std std-ref">state</span></a>.</p></li>
<li><p><strong>show_full_json</strong> (<em>bool</em>) – <p>When <code class="docutils literal notranslate"><span class="pre">True</span></code>, the returned Freshmaker Event JSON objects
contains all the fields described in the
<a class="reference internal" href="api_v1.html#event-json-api-1"><span class="std std-ref">Freshmaker Event representation for API version 1</span></a>.</p>
<p>When <code class="docutils literal notranslate"><span class="pre">False</span></code>, the returned Freshmaker Event JSON objects are in the
<a class="reference internal" href="#event-json-api-2"><span class="std std-ref">Freshmaker Event representation for API version 2</span></a> format.</p>
<p>Default value for API version 1 is <code class="docutils literal notranslate"><span class="pre">True</span></code>, for API version 2 is <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</p></li>
<li><p><strong>order_by</strong> (<em>string</em>) – <p>Order the events by the given field. If <code class="docutils literal notranslate"><span class="pre">-</span></code> prefix is used,
the order will be descending. The default value is <code class="docutils literal notranslate"><span class="pre">-id</span></code>. Available fields are:</p>
<ul>
<li><p><a class="reference internal" href="api_v1.html#event-id"><span class="std std-ref">id</span></a></p></li>
<li><p><a class="reference internal" href="api_v1.html#event-message-id"><span class="std std-ref">message_id</span></a></p></li>
</ul>
</p></li>
</ul>
</dd>
<dt class="field-even">Status Codes</dt>
<dd class="field-even"><ul class="simple">
<li><p><span><a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.1">200 OK</a></span> – Requested events are returned.</p></li>
<li><p><span><a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.5">404 Not Found</a></span> – Freshmaker event not found.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="http patch">
<dt class="sig sig-object http" id="patch--api-2-events-(int-id)">
<span class="sig-name descname"><span class="pre">PATCH</span> </span><span class="sig-name descname"><span class="pre">/api/2/events/</span></span><span class="sig-paren">(</span><em class="property"><span class="pre">int:</span> </em><em class="sig-param"><span class="pre">id</span></em><span class="sig-paren">)</span><a class="headerlink" href="#patch--api-2-events-(int-id)" title="Permalink to this definition"></a></dt>
<dd><p>Manage Freshmaker event defined by ID. The request must be
<em class="mimetype">application/json</em>.</p>
<p>Returns the cancelled Freshmaker event as JSON.</p>
<p><strong>Sample request</strong>:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="nf">PATCH</span> <span class="nn">/api/1/events</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;action&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cancel&quot;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">JSON Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>action</strong> (<em>string</em>) – Action to do with an Event. Currently only “cancel”
is supported.</p></li>
</ul>
</dd>
<dt class="field-even">Status Codes</dt>
<dd class="field-even"><ul class="simple">
<li><p><span><a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.1">200 OK</a></span> – Cancelled event is returned.</p></li>
<li><p><span><a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.1">400 Bad Request</a></span> – Action is missing or is unsupported.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="http post">
<dt class="sig sig-object http" id="post--api-2-builds-">
<span class="sig-name descname"><span class="pre">POST</span> </span><span class="sig-name descname"><span class="pre">/api/2/builds/</span></span><a class="headerlink" href="#post--api-2-builds-" title="Permalink to this definition"></a></dt>
<dd><p>Trigger manual Freshmaker rebuild. The request must be
<em class="mimetype">application/json</em>.</p>
<p>Returns the newly created Freshmaker event as JSON.</p>
<p><strong>Sample request</strong>:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/api/1/builds</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;errata_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">12345</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;container_images&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;foobar-1.2-234&quot;</span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">JSON Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>errata_id</strong> (<em>string</em>) – The ID of Errata advisory to rebuild
artifacts for. If this is not set, freshmaker_event_id must be set.</p></li>
<li><p><strong>container_images</strong> (<em>list</em>) – When set, defines list of NVRs
of leaf container images which should be rebuild in the
newly created Event.</p></li>
<li><p><strong>dry_run</strong> (<em>bool</em>) – When True, the Event will be handled in
the DRY_RUN mode.</p></li>
<li><p><strong>freshmaker_event_id</strong> (<em>bool</em>) – When set, it defines the event
which will be used as the dependant event. Successfull builds from
this event will be reused in the newly created event instead of
building all the artifacts from scratch. If errata_id is not
provided, it will be inherited from this Freshmaker event.</p></li>
</ul>
</dd>
<dt class="field-even">Status Codes</dt>
<dd class="field-even"><ul class="simple">
<li><p><span><a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.1">200 OK</a></span> – A new event was created.</p></li>
<li><p><span><a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.1">400 Bad Request</a></span> – The provided input is invalid.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="http get">
<dt class="sig sig-object http" id="get--api-2-verify-image-(image)">
<span class="sig-name descname"><span class="pre">GET</span> </span><span class="sig-name descname"><span class="pre">/api/2/verify-image/</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">image</span></em><span class="sig-paren">)</span><a class="headerlink" href="#get--api-2-verify-image-(image)" title="Permalink to this definition"></a></dt>
<dd><p>Verifies whether the container image defined by the NVR is handled
by Freshmaker. If not, returns explanation why.</p>
<p><strong>Sample request</strong>:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="nf">GET</span> <span class="nn">/api/1/verify-image/foo-1-1</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="o">:</span> <span class="l">application/json</span>
</pre></div>
</div>
<p><strong>Sample response</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>{
    &quot;images&quot;: {
        &quot;foo-1-1&quot;: [
            &quot;content-set-1&quot;,
            &quot;content-set-2&quot;
        ]
    },
    &quot;msg&quot;: &quot;Found 1 images which are handled by Freshmaker.&quot;
}
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Status Codes</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span><a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.1">200 OK</a></span> – Image is handled by Freshmaker.</p></li>
<li><p><span><a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.1">400 Bad Request</a></span> – Image is not handled by Freshmaker or not found.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="http get">
<dt class="sig sig-object http" id="get--api-2-verify-image-repository-(project)-(repo)">
<span class="sig-name descname"><span class="pre">GET</span> </span><span class="sig-name descname"><span class="pre">/api/2/verify-image-repository/</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">project</span></em><span class="sig-paren">)</span><span class="sig-name descname"><span class="pre">/</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">repo</span></em><span class="sig-paren">)</span><a class="headerlink" href="#get--api-2-verify-image-repository-(project)-(repo)" title="Permalink to this definition"></a></dt>
<dd><p>Verifies whether the container image repository is handled
by Freshmaker. If not, returns explanation why.</p>
<p><strong>Sample request</strong>:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="nf">GET</span> <span class="nn">/api/1/verify-image-repository/foo/bar</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="o">:</span> <span class="l">application/json</span>
</pre></div>
</div>
<p><strong>Sample response</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>{
    &quot;repository: {
        &quot;auto_rebuild_tags&quot;: [
            &quot;latest&quot;
        ],
    },
    &quot;images&quot;: {
        &quot;foo-1-1&quot;: {
            &quot;content_sets&quot;: [
                &quot;content-set-1&quot;,
                &quot;content-set-2&quot;
            ],
            &quot;tags&quot;: [
                &quot;latest&quot;,
                &quot;2.0&quot;
            ]
        }
    },
    &quot;msg&quot;: &quot;Found 1 images which are handled by Freshmaker.&quot;
}
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Status Codes</dt>
<dd class="field-odd"><ul class="simple">
<li><p><span><a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.1">200 OK</a></span> – Image repository is handled by Freshmaker.</p></li>
<li><p><span><a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.1">400 Bad Request</a></span> – Image repository is not handled by Freshmaker or not
found.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="http post">
<dt class="sig sig-object http" id="post--api-2-async-builds-">
<span class="sig-name descname"><span class="pre">POST</span> </span><span class="sig-name descname"><span class="pre">/api/2/async-builds/</span></span><a class="headerlink" href="#post--api-2-async-builds-" title="Permalink to this definition"></a></dt>
<dd><p>Trigger Freshmaker async rebuild (a.k.a non-CVE rebuild). The request
must be <em class="mimetype">application/json</em>.</p>
<p>Returns the newly created Freshmaker event as JSON.</p>
<p><strong>Sample request</strong>:</p>
<div class="highlight-http notranslate"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/api/1/async-builds</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="o">:</span> <span class="l">application/json</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;dist_git_branch&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;master&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;container_images&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;foo-1-1&quot;</span><span class="p">]</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">JSON Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dist_git_branch</strong> (<em>string</em>) – The name of the branch in dist-git
to build the container images from. This is a mandatory field.</p></li>
<li><p><strong>container_images</strong> (<em>list</em>) – A list of images to rebuild. They
might be sharing a parent-child relationship which are then rebuilt
by Freshmaker in the right order. For example, if images A is parent
image of B, which is parent image of C, and container_images is
[A, B, C], Freshmaker will make sure to rebuild all three images,
in the correct order. It is however possible also to rebuild images
completely unrelated to each other. This is a mandatory field.</p></li>
<li><p><strong>dry_run</strong> (<em>bool</em>) – When True, the Event will be handled in
the DRY_RUN mode.</p></li>
<li><p><strong>freshmaker_event_id</strong> (<em>bool</em>) – When set, it defines the event
which will be used as the dependant event. Successfull builds from
this event will be reused in the newly created event instead of
building all the artifacts from scratch. The event should refer
to an async rebuild event.</p></li>
<li><p><strong>brew_target</strong> (<em>string</em>) – The name of the Brew target. While
requesting an async rebuild, it should be the same for all the images
in the list of container_images. This parameter is optional, with
default value will be pulled from the previous buildContainer task.</p></li>
</ul>
</dd>
<dt class="field-even">Status Codes</dt>
<dd class="field-even"><ul class="simple">
<li><p><span><a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.1">200 OK</a></span> – A new event was created.</p></li>
<li><p><span><a class="reference external" href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.1">400 Bad Request</a></span> – The provided input is invalid.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="api_v1.html" class="btn btn-neutral float-left" title="API version 1" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="configuration.html" class="btn btn-neutral float-right" title="Configuration" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, Red Hat, Inc. and others.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>