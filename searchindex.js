Search.setIndex({"docnames": ["about", "api_v1", "api_v2", "configuration", "db", "index", "messaging_api", "pyxis_gql_async"], "filenames": ["about.rst", "api_v1.rst", "api_v2.rst", "configuration.rst", "db.rst", "index.rst", "messaging_api.rst", "pyxis_gql_async.rst"], "titles": ["About Freshmaker", "API version 1", "API version 2", "Configuration", "Freshmaker database", "Freshmaker", "Messaging API", "Async Pyxis GQL Usage"], "terms": {"The": [1, 2, 3, 6, 7], "freshmak": [1, 2, 3, 6, 7], "i": [1, 2, 3, 4, 5, 6, 7], "alwai": [1, 2], "repres": [1, 2], "request": [1, 2, 7], "exampl": [1, 2, 3, 5], "depending_ev": [1, 2], "depends_on_ev": [1, 2], "dry_run": [1, 2], "fals": [1, 2], "event_type_id": [1, 2], "10": [1, 2], "id": [1, 2, 4], "18730": [1, 2], "message_id": [1, 2], "message_123": [1, 2], "requested_rebuild": [1, 2], "null": [1, 2], "requester_metadata": [1, 2], "search_kei": [1, 2], "44637": [1, 2], "state": [1, 2, 5], "3": [1, 2, 7], "state_nam": [1, 2], "complet": [1, 2, 7], "state_reason": [1, 2], "4": [1, 2], "imag": [1, 2, 5], "rebuilt": [1, 2, 3], "time_cr": [1, 2], "2019": [1, 2], "08": [1, 2], "01t07": [1, 2], "00": [1, 2], "46z": [1, 2], "time_don": [1, 2], "03": [1, 2], "12z": [1, 2], "url": [1, 2, 7], "field": [1, 2], "us": [1, 2, 3, 4], "have": [1, 3, 7], "follow": [1, 2, 3, 4, 7], "mean": [1, 2], "list": [1, 2, 3, 7], "which": [1, 2, 3, 4, 7], "ar": [1, 2, 3, 4, 5, 7], "part": 1, "thi": [1, 2, 3, 4, 6, 7], "number": [1, 2, 7], "other": [1, 2, 5, 7], "depend": [1, 2], "boolean": 1, "when": [1, 2, 4, 5, 6, 7], "set": [1, 2, 5, 7], "true": [1, 2], "handl": [1, 2, 3, 5], "dry": 1, "run": [1, 4, 7], "mode": [1, 2], "In": [1, 4, 7], "real": 1, "submit": 1, "system": [1, 4], "instead": [1, 2, 7], "all": [1, 2, 3, 4, 7], "automat": [1, 5], "move": [1, 7], "type": [1, 2], "full": 1, "can": [1, 4, 7], "most": 1, "import": 1, "errataadvisorystatechangedev": 1, "trigger": [1, 2], "messag": [1, 5], "rebuild": [1, 2, 3, 5], "current": [1, 2, 4, 5], "just": [1, 7], "contain": [1, 2, 3, 5, 6, 7], "result": 1, "advisori": [1, 2], "releas": [1, 3], "13": 1, "manualrebuildwithadvisoryev": 1, "manual": [1, 2], "string": [1, 2, 3], "fedmsg": [1, 6], "amqp": [1, 6], "should": [1, 2, 3, 4], "fill": 1, "onli": [1, 2, 7], "particular": 1, "nvr": [1, 2], "kerbero": 1, "usernam": 1, "otherwis": [1, 7], "object": [1, 2], "addit": [1, 3], "metadata": 1, "It": [1, 2, 5, 7], "track": 1, "context": [1, 7], "kei": [1, 3], "identifi": 1, "sourc": [1, 7], "For": [1, 2, 4, 7], "each": [1, 2, 7], "differ": [1, 2, 3, 7], "wai": [1, 2, 7], "how": [1, 7], "gener": [1, 4, 5], "defin": [1, 2, 3, 4, 6], "0": [1, 2], "initi": 1, "now": [1, 7], "search": 1, "some": [1, 4, 7], "been": 1, "found": [1, 2], "them": [1, 7], "2": [1, 5, 6, 7], "note": 1, "doe": 1, "were": [1, 4, 7], "successful": [1, 2], "one": [1, 3, 7], "enough": 1, "mark": 1, "fail": [1, 2], "There": [1, 2], "wa": [1, 2], "major": 1, "error": 1, "while": [1, 2, 4, 7], "skip": 1, "No": 1, "allow": [1, 3], "": [1, 6, 7], "configur": [1, 4, 5], "5": [1, 7], "cancel": [1, 2], "ha": [1, 4, 7], "name": [1, 2, 3], "see": 1, "more": 1, "info": 1, "sentenc": 1, "describ": [1, 2], "datetim": 1, "date": 1, "time": [1, 4, 7], "build_arg": 1, "build_id": 1, "22429387": 1, "dep_on": 1, "fedora": 1, "30": [1, 7], "dep_on_id": 1, "21657": 1, "event_id": 1, "16730": 1, "21837": 1, "httpd": 1, "odcs_compos": 1, "original_nvr": 1, "rebuild_reason": 1, "directly_affect": 1, "rebuilt_nvr": [1, 3], "1561731291": 1, "done": [1, 2], "built": 1, "successfulli": 1, "time_complet": 1, "06": 1, "29t03": 1, "28": 1, "56z": 1, "time_submit": 1, "28t14": 1, "14": 1, "51z": 1, "type_nam": 1, "argument": 1, "pass": 1, "content": [1, 2], "chang": [1, 4, 5], "ani": [1, 3, 4], "commonli": 1, "arch": 1, "white": 1, "space": 1, "separ": [1, 7], "architectur": 1, "against": 1, "branch": [1, 2, 4], "from": [1, 2, 3, 4, 7], "code": [1, 2, 5], "taken": 1, "commit": [1, 4], "hash": 1, "repositori": [1, 2, 3, 4], "target": [1, 2], "koji": 1, "retry_count": 1, "mani": [1, 3], "retri": 1, "support": [1, 2, 3], "moment": 1, "brew": [1, 2], "buildcontain": [1, 2], "task": [1, 2], "If": [1, 2, 3, 7], "did": 1, "due": 1, "failur": 1, "return": [1, 2, 7], "reason": 1, "odc": 1, "compos": 1, "directli": [1, 7], "origin": 1, "befor": 1, "why": [1, 2], "includ": [1, 2], "affect": 1, "cve": [1, 2, 5], "becaus": [1, 3], "being": [1, 7], "plan": 1, "rpm": [1, 5], "an": [1, 2, 3, 4, 7], "packag": [1, 7], "modul": [1, 7], "image_repositori": 1, "type__nam": 1, "multipl": [1, 7], "thei": [1, 2, 7], "wrap": 1, "item": 1, "json_object": 1, "meta": 1, "first": [1, 4], "localhost": 1, "per_pag": 1, "page": [1, 7], "last": 1, "14890": 1, "next": [1, 7], "prev": 1, "total": [1, 2, 7], "148898": 1, "dict": 1, "about": [1, 5], "possibl": [1, 2], "show": [1, 2], "per": [1, 4], "singl": 1, "choos": 1, "get": [1, 2, 7], "queri": [1, 2, 5], "paramet": [1, 2, 3], "int": [1, 2], "show_full_json": [1, 2], "bool": [1, 2], "format": [1, 2], "default": [1, 2, 3], "valu": [1, 2, 3], "order_bi": [1, 2], "order": [1, 2], "given": [1, 2, 7], "prefix": [1, 2], "descend": [1, 2], "avail": [1, 2, 5, 7], "statu": [1, 2], "200": [1, 2], "ok": [1, 2], "404": [1, 2], "Not": [1, 2], "patch": [1, 2], "manag": [1, 2, 4], "must": [1, 2, 3], "applic": [1, 2], "sampl": [1, 2], "accept": [1, 2], "action": [1, 2], "do": [1, 2, 7], "400": [1, 2], "bad": [1, 2], "miss": [1, 2], "unsupport": [1, 2], "post": [1, 2], "newli": [1, 2], "creat": [1, 2, 4, 7], "errata_id": [1, 2], "12345": [1, 2], "container_imag": [1, 2], "foobar": [1, 2], "234": [1, 2], "errata": [1, 2], "freshmaker_event_id": [1, 2], "leaf": [1, 2], "reus": [1, 2], "scratch": [1, 2], "provid": [1, 2, 7], "inherit": [1, 2, 3], "A": [1, 2], "new": [1, 2, 4, 5], "input": [1, 2], "invalid": [1, 2], "verifi": [1, 2], "whether": [1, 2], "explan": [1, 2], "foo": [1, 2], "respons": [1, 2, 7], "msg": [1, 2], "project": [1, 2], "repo": [1, 2], "bar": [1, 2], "auto_rebuild_tag": [1, 2], "latest": [1, 2, 4], "content_set": [1, 2], "tag": [1, 2], "async": [1, 2, 5], "k": [1, 2], "non": [1, 2, 7], "dist_git_branch": [1, 2], "main": [1, 2, 4, 7], "dist": [1, 2], "git": [1, 2, 4], "mandatori": [1, 2], "might": [1, 2, 7], "share": [1, 2], "parent": [1, 2, 4], "child": [1, 2], "relationship": [1, 2, 4], "right": [1, 2], "b": [1, 2], "c": [1, 2], "make": [1, 2, 4, 7], "sure": [1, 2], "three": [1, 2], "correct": [1, 2], "howev": [1, 2], "also": [1, 2, 4, 6], "unrel": [1, 2], "refer": [1, 2, 5], "brew_target": [1, 2], "same": [1, 2, 7], "option": [1, 2, 7], "pull": [1, 2], "previou": [1, 2, 4], "mostli": 2, "1": [2, 5, 6, 7], "document": [2, 3], "therefor": [2, 7], "between": [2, 7], "two": [2, 7], "builds_summari": 2, "almost": 2, "replac": 2, "summari": 2, "group": [2, 3], "7": 2, "exactli": 2, "work": [2, 7], "file": [3, 4], "locat": 3, "etc": [3, 4], "config": 3, "py": [3, 4, 7], "base": 3, "conf": 3, "you": [3, 4, 7], "interest": 3, "here": 3, "check": [3, 4, 7], "both": 3, "those": [3, 5, 7], "dictionari": 3, "where": [3, 4], "role": 3, "user": 3, "empti": [3, 4], "admin": 3, "fresmak": 3, "tom_hank": 3, "manual_rebuild": 3, "extend": 3, "updat": [3, 5], "littl": 3, "bit": 3, "than": [3, 7], "standard": [3, 7], "mainli": 3, "its": [3, 4, 6], "unpublish": 3, "usual": 3, "publish": 3, "sinc": [3, 4], "still": 3, "need": [3, 7], "unpublished_except": 3, "add": [3, 4], "registri": [3, 7], "pair": [3, 7], "determin": 3, "And": [3, 4], "too": 3, "With": 3, "abov": 3, "said": 3, "want": [3, 4, 7], "your": [3, 4], "alongsid": 3, "entri": 3, "your_registri": 3, "rebuilt_nvr_release_suffix": 3, "suffix": [3, 4], "timestamp": 3, "sql": 4, "toolkit": 4, "sqlalchemi": 4, "extens": 4, "flask": 4, "so": [4, 7], "whenev": 4, "column": 4, "tabl": [4, 7], "least": 4, "model": 4, "everi": [4, 6], "class": [4, 7], "freshmakerbas": 4, "actual": 4, "own": 4, "As": 4, "we": [4, 7], "postgresql": 4, "deploy": 4, "sqlite": 4, "local": 4, "environ": 4, "besid": 4, "test": 4, "memori": 4, "folder": 4, "live": 4, "suppos": 4, "createdb": 4, "command": 4, "db": 4, "appli": 4, "scheme": 4, "like": 4, "after": [4, 7], "upgrad": 4, "alreadi": 4, "someth": 4, "directori": 4, "sqlite3": 4, "select": 4, "artifact_build": 4, "similar": [4, 7], "cachito": 4, "step": 4, "below": 4, "data": 4, "schema": 4, "checkout": 4, "ensur": 4, "present": 4, "sqlalchemy_database_uri": 4, "path": [4, 7], "root": 4, "call": 4, "made": [4, 7], "case": [4, 7], "autogener": 4, "script": 4, "version": [4, 5, 6, 7], "revis": 4, "renam": 4, "descript": 4, "modifi": 4, "docstr": 4, "captur": 4, "necessarili": 4, "what": 4, "reflect": 4, "function": [4, 7], "adjust": 4, "necessari": 4, "downgrad": 4, "revers": 4, "To": [4, 7], "popul": 4, "dummi": 4, "requir": 4, "remov": 4, "earlier": 4, "servic": 5, "written": 5, "address": 5, "api": 5, "event": 5, "json": [5, 6], "represent": [5, 6], "artifact": [5, 6], "build": [5, 7], "rest": 5, "pagin": 5, "http": [5, 7], "permiss": 5, "eu": 5, "min": 5, "databas": 5, "up": [5, 7], "migrat": 5, "pyxi": 5, "gql": 5, "usag": 5, "remark": 5, "asynchron": 5, "send": 6, "sent": 6, "give": 7, "pyxis_gql_async": 7, "start": 7, "let": 7, "take": 7, "good": 7, "analogi": 7, "miguel": 7, "grinberg": 7, "2017": 7, "pycon": 7, "talk": 7, "chess": 7, "master": 7, "judit": 7, "polg\u00e1r": 7, "host": 7, "exhibit": 7, "she": 7, "plai": 7, "amateur": 7, "player": 7, "conduct": 7, "synchron": 7, "assumpt": 7, "24": 7, "oppon": 7, "second": 7, "55": 7, "game": 7, "averag": 7, "60": 7, "never": 7, "until": 7, "1800": 7, "minut": 7, "entir": 7, "720": 7, "12": 7, "hour": 7, "leav": 7, "dure": 7, "wait": 7, "One": 7, "120": 7, "cut": 7, "down": 7, "3600": 7, "realpython": 7, "miguelgrinberg": 7, "speedup": 7, "io": 7, "bound": 7, "scenario": 7, "free": 7, "execut": 7, "runtim": 7, "thing": 7, "certain": 7, "parallel": 7, "thread": 7, "fundament": 7, "altern": 7, "block": 7, "abl": 7, "loop": 7, "board": 7, "resum": 7, "consequ": 7, "cannot": 7, "python": 7, "await": 7, "insid": 7, "reserv": 7, "few": 7, "special": 7, "keyword": 7, "def": 7, "final": 7, "put": 7, "lose": 7, "would": 7, "analog": 7, "organ": 7, "match": 7, "asyncio": 7, "write": 7, "reli": 7, "librari": 7, "implement": 7, "lower": 7, "level": 7, "our": 7, "could": 7, "aiohttp": 7, "doc": 7, "org": 7, "en": 7, "stabl": 7, "index": 7, "html": 7, "clientsess": 7, "session": 7, "__name__": 7, "__main__": 7, "print": 7, "f": 7, "shedul": 7, "batch": 7, "togeth": 7, "sens": 7, "create_task": 7, "task1": 7, "async_function1": 7, "task2": 7, "async_function2": 7, "simpl": 7, "without": 7, "act": 7, "variabl": 7, "obj": 7, "my_async_gener": 7, "process_obj": 7, "append": 7, "discuss": 7, "asyncfor": 7, "veri": 7, "hand": 7, "process": 7, "becom": 7, "as_complet": 7, "ignor": 7, "condit": 7, "aggreg": 7, "x_valu": 7, "results_to_skip": 7, "collected_result": 7, "async_funct": 7, "x": 7, "again": 7, "element": 7, "orchestr": 7, "sever": 7, "wrapper": 7, "integr": 7, "flow": 7, "latter": 7, "resid": 7, "extern": 7, "precis": 7, "itself": 7, "get_repository_by_path": 7, "condition": 7, "aggregate_path": 7, "path_registry_v": 7, "tupl": 7, "str": 7, "com": 7, "youtu": 7, "ig6fr81xhka": 7, "t": 7, "4m29": 7, "stackoverflow": 7, "question": 7, "56161595": 7}, "objects": {"": [[1, 0, 1, "post--api-1-async-builds-", "/api/1/async-builds/"], [1, 0, 1, "post--api-1-builds-", "/api/1/builds/"], [1, 1, 1, "get--api-1-events-", "/api/1/events/"], [1, 1, 1, "get--api-1-events-(int-id)", "/api/1/events/(int:id)"], [1, 2, 1, "patch--api-1-events-(int-id)", "/api/1/events/(int:id)"], [1, 1, 1, "get--api-1-verify-image-repository-(project)-(repo)", "/api/1/verify-image-repository/(project)/(repo)"], [1, 1, 1, "get--api-1-verify-image-(image)", "/api/1/verify-image/(image)"], [2, 0, 1, "post--api-2-async-builds-", "/api/2/async-builds/"], [2, 0, 1, "post--api-2-builds-", "/api/2/builds/"], [2, 1, 1, "get--api-2-events-", "/api/2/events/"], [2, 1, 1, "get--api-2-events-(int-id)", "/api/2/events/(int:id)"], [2, 2, 1, "patch--api-2-events-(int-id)", "/api/2/events/(int:id)"], [2, 1, 1, "get--api-2-verify-image-repository-(project)-(repo)", "/api/2/verify-image-repository/(project)/(repo)"], [2, 1, 1, "get--api-2-verify-image-(image)", "/api/2/verify-image/(image)"]]}, "objtypes": {"0": "http:post", "1": "http:get", "2": "http:patch"}, "objnames": {"0": ["http", "post", "HTTP post"], "1": ["http", "get", "HTTP get"], "2": ["http", "patch", "HTTP patch"]}, "titleterms": {"about": [0, 7], "freshmak": [0, 4, 5], "api": [1, 2, 6], "version": [1, 2], "1": 1, "event": [1, 2, 6], "json": [1, 2], "represent": [1, 2], "artifact": [1, 2], "build": [1, 2, 6], "rest": [1, 2], "pagin": [1, 2], "http": [1, 2], "2": 2, "configur": 3, "permiss": 3, "eu": 3, "imag": 3, "other": 3, "databas": 4, "set": 4, "up": 4, "updat": 4, "queri": 4, "migrat": 4, "content": 5, "messag": 6, "state": 6, "chang": 6, "min": 6, "async": 7, "pyxi": 7, "gql": 7, "usag": 7, "gener": 7, "remark": 7, "asynchron": 7, "code": 7, "exampl": 7, "basic": 7, "call": 7, "schedul": 7, "task": 7, "collect": 7, "result": 7, "gather": 7, "chain": 7, "usual": 7, "structur": 7, "concret": 7, "us": 7, "pyxisasyncgql": 7, "refer": 7}, "envversion": {"sphinx.domains.c": 3, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 9, "sphinx.domains.index": 1, "sphinx.domains.javascript": 3, "sphinx.domains.math": 2, "sphinx.domains.python": 4, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx.ext.intersphinx": 1, "sphinx.ext.viewcode": 1, "sphinx": 60}, "alltitles": {"About Freshmaker": [[0, "about-freshmaker"]], "API version 1": [[1, "api-version-1"]], "Event JSON representation": [[1, "event-json-representation"], [2, "event-json-representation"]], "Artifact Build JSON representation": [[1, "artifact-build-json-representation"], [2, "artifact-build-json-representation"]], "REST API pagination": [[1, "rest-api-pagination"], [2, "rest-api-pagination"]], "HTTP REST API": [[1, "http-rest-api"], [2, "http-rest-api"]], "API version 2": [[2, "api-version-2"]], "Configuration": [[3, "configuration"]], "Permissions": [[3, "permissions"]], "EUS images": [[3, "eus-images"]], "Other": [[3, "other"]], "Freshmaker database": [[4, "freshmaker-database"]], "Setting up Database": [[4, "setting-up-database"]], "Database update": [[4, "database-update"]], "Querying database": [[4, "querying-database"]], "Database Migrations": [[4, "database-migrations"]], "Freshmaker": [[5, "freshmaker"]], "Contents:": [[5, null]], "Messaging API": [[6, "messaging-api"]], "event.state.changed": [[6, "event-state-changed"]], "event.state.changed.min": [[6, "event-state-changed-min"]], "build.state.changed": [[6, "build-state-changed"]], "Async Pyxis GQL Usage": [[7, "async-pyxis-gql-usage"]], "General remarks about asynchronous code": [[7, "general-remarks-about-asynchronous-code"]], "Usage examples": [[7, "usage-examples"]], "Basic calls": [[7, "basic-calls"]], "Scheduling tasks and collecting results with gather": [[7, "scheduling-tasks-and-collecting-results-with-gather"]], "Chaining results": [[7, "chaining-results"]], "Usual structure of async code": [[7, "usual-structure-of-async-code"]], "Concrete example for using PyxisAsyncGQL": [[7, "concrete-example-for-using-pyxisasyncgql"]], "References": [[7, "references"]]}, "indexentries": {}})